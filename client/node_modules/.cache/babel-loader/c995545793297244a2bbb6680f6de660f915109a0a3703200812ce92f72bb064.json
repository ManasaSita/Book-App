{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Link,useNavigate,Outlet,useLocation}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Layout=()=>{const{user,logout}=useAuth();const navigate=useNavigate();const location=useLocation();const[selectedNav,setSelectedNav]=useState('');const[isDropdownOpen,setDropdownOpen]=useState(false);const dropdownRef=useRef(null);useEffect(()=>{if(location.pathname.includes('/friends/messages')){setSelectedNav('chat');}else{const path=location.pathname.split('/')[1];if(['dashboard','mybooks','friends','profile'].includes(path)){setSelectedNav(path);}}const handleOutsideClick=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setDropdownOpen(false);}};document.addEventListener('mousedown',handleOutsideClick);return()=>{document.removeEventListener('mousedown',handleOutsideClick);};},[location]);const handleLogout=()=>{logout();navigate('/login');};const toggleDropdown=()=>{setSelectedNav('profile');setDropdownOpen(!isDropdownOpen);};const handleNavClick=type=>{setSelectedNav(type);};const isAuthPage=location.pathname==='/login'||location.pathname==='/register';return/*#__PURE__*/_jsx(\"div\",{className:\"app-container\",children:/*#__PURE__*/_jsxs(\"div\",{ref:dropdownRef,children:[!isAuthPage&&/*#__PURE__*/_jsxs(\"header\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbar-logo\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",children:\"BookShelf\"})}),/*#__PURE__*/_jsx(\"nav\",{className:\"navbar-links\",children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",onClick:()=>handleNavClick('dashboard'),className:selectedNav==='dashboard'?'selected-nav':'nav-link',children:\"Dashboard\"}),/*#__PURE__*/_jsx(Link,{to:\"/mybooks\",onClick:()=>handleNavClick('mybooks'),className:selectedNav==='mybooks'?'selected-nav':'nav-link',children:\"My Books\"}),/*#__PURE__*/_jsx(Link,{to:\"/friends\",onClick:()=>handleNavClick('friends'),className:selectedNav==='friends'?'selected-nav':'nav-link',children:\"Friends\"}),/*#__PURE__*/_jsx(Link,{to:\"/friends/messages\"// Add a new link for the Chat page\n,onClick:()=>handleNavClick('chat'),className:selectedNav==='chat'?'selected-nav':'nav-link',children:\"Chat\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-dropdown\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:toggleDropdown,className:selectedNav==='profile'?'selected-nav':'nav-link',children:\"Profile\"}),isDropdownOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"dropdown-item\",children:\"My Profile\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleLogout,className:\"dropdown-item no-margin\",children:\"Logout\"})]})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"nav-link\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"nav-link\",children:\"Register\"})]})})]}),/*#__PURE__*/_jsx(\"main\",{className:\"main-content\",children:/*#__PURE__*/_jsx(Outlet,{})})]})});};export default Layout;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","Outlet","useLocation","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Layout","user","logout","navigate","location","selectedNav","setSelectedNav","isDropdownOpen","setDropdownOpen","dropdownRef","pathname","includes","path","split","handleOutsideClick","event","current","contains","target","document","addEventListener","removeEventListener","handleLogout","toggleDropdown","handleNavClick","type","isAuthPage","className","children","ref","to","onClick"],"sources":["/home/manasa/Projects/UpGrad/Project/bookShelf/client/src/components/Layout.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate, Outlet, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\n\nconst Layout = () => {\n  const { user, logout } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [selectedNav, setSelectedNav] = useState('');\n  const [isDropdownOpen, setDropdownOpen] = useState(false);\n  const dropdownRef = useRef(null);\n\n  useEffect(() => {\n    if (location.pathname.includes('/friends/messages')) {\n      setSelectedNav('chat');\n    } else {\n      const path = location.pathname.split('/')[1];\n      if (['dashboard', 'mybooks', 'friends', 'profile'].includes(path)) {\n        setSelectedNav(path);\n      }\n    }\n\n    const handleOutsideClick = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleOutsideClick);\n    return () => {\n      document.removeEventListener('mousedown', handleOutsideClick);\n    };\n  }, [location]);\n\n  const handleLogout = () => {\n    logout();\n    navigate('/login');\n  };\n\n  const toggleDropdown = () => {\n    setSelectedNav('profile');\n    setDropdownOpen(!isDropdownOpen);\n  };\n\n  const handleNavClick = (type) => {\n    setSelectedNav(type);\n  };\n\n  const isAuthPage = location.pathname === '/login' || location.pathname === '/register';\n\n  return (\n    <div className='app-container'>\n      <div ref={dropdownRef}>\n        {!isAuthPage && (\n          <header className='navbar'>\n            <div className='navbar-logo'>\n              <Link to=\"/dashboard\">BookShelf</Link>\n            </div>\n            <nav className='navbar-links'>\n              {user ? (\n                <>\n                  <Link\n                    to=\"/dashboard\"\n                    onClick={() => handleNavClick('dashboard')}\n                    className={selectedNav === 'dashboard' ? 'selected-nav' : 'nav-link'}\n                  >\n                    Dashboard\n                  </Link>\n                  <Link\n                    to=\"/mybooks\"\n                    onClick={() => handleNavClick('mybooks')}\n                    className={selectedNav === 'mybooks' ? 'selected-nav' : 'nav-link'}\n                  >\n                    My Books\n                  </Link>\n                  <Link\n                    to=\"/friends\"\n                    onClick={() => handleNavClick('friends')}\n                    className={selectedNav === 'friends' ? 'selected-nav' : 'nav-link'}\n                  >\n                    Friends\n                  </Link>\n                  <Link\n                    to=\"/friends/messages\"  // Add a new link for the Chat page\n                    onClick={() => handleNavClick('chat')}\n                    className={selectedNav === 'chat' ? 'selected-nav' : 'nav-link'}\n                  >\n                    Chat\n                  </Link>\n                  <div className=\"profile-dropdown\">\n                    <div\n                      onClick={toggleDropdown}\n                      className={selectedNav === 'profile' ? 'selected-nav' : 'nav-link'}\n                    >\n                      Profile\n                    </div>\n                    {isDropdownOpen && (\n                      <div className=\"dropdown-menu\">\n                        <Link to=\"/profile\" className=\"dropdown-item\">My Profile</Link>\n                        <p onClick={handleLogout} className=\"dropdown-item no-margin\">Logout</p>\n                      </div>\n                    )}\n                  </div>\n                </>\n              ) : (\n                <>\n                  <Link to=\"/login\" className='nav-link'>Login</Link>\n                  <Link to=\"/register\" className='nav-link'>Register</Link>\n                </>\n              )}\n            </nav>\n          </header>\n        )}\n        <main className='main-content'>\n          <Outlet />\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default Layout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}